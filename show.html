<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    	<title>Vocabulary Test</title>
        <!-- Bootstrap -->
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/base.css" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Josefin+Sans:300,400|Quattrocento+Sans|Crimson+Text" rel="stylesheet">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="js/problem_set.js"></script>
    </head>
    <body>
        <div class="page-header">
            <h1>Vocabulary Test</h1>
        </div>
        <div class="container">
            <ul class="nav nav-pills navbar-right">
                <li><a href="/">Test</a></li>
                <li class="active"><a href="#">Problem Set</a></li>
                <li class="disabled"><a>Add More</a></li>       
            </ul>
        </div>
        <br>
        <div class="container">
            <div class="jumbotron">
                <ol id="vocabulary_list">
                </ol>
            </div>
        </div>

        <script>
            var headers = new Headers();
            headers.append('X-CSRFToken', getCookie('csrftoken'));
            headers.append('Accept', "application/json");
            headers.append('Content-Type', "application/json");
            function getCookie(name) {
                var value = "; " + document.cookie;
                var parts = value.split("; " + name + "=");
                if (parts.length == 2) return parts.pop().split(";").shift();
            }

            $(function () {
                var length = problem_set.length ;
                var word, prob, ans ;
                for (var index in problem_set) {
                    word = problem_set[index] ;
                    prob = word.fields.pro ;
                    ans = word.fields.ans ;
                    var node = document.createElement("li") ;
                    var textnode = document.createTextNode(prob + ": " + ans) ;
                    node.appendChild(textnode) ;
                    vocabulary_list.appendChild(node) ;
                }

            }
/*
            <li id=index><p>{{ word.prob }}: {{ word.ans }} 
                <span style="float: right;">
                    <a class="close" href="javascript:Delete({{ word.id }});" style="margin-top: 8px;">Ã—</a>
                </span></p>
            </li>
*/ 
            function Delete(index) {
                console.log(word_id) ;
                var word = document.getElementById(index) ;
                word.parentNode.removeChild(word) ;
/*                fetch('/data/', {
                    method: 'delete', 
                    body: JSON.stringify({'word_id': word_id}),
                    headers: headers,
                    credentials: 'include'
                }).then(function(res) {
                    if (!res.ok) {
                        alert("error!") ;
                    }
                })
*/
            }
        </script>
    </body>
</html>
